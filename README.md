# solo-coding

## requireJs模式优化
1. vue 内 import写法转换成 require 写法 - 完成
2. merge.js 尝试用根路径 - 完成
3. 继续打包，首页所需vue文件全部打包成一个文件
4. script src 写法统一改成 load 写法
    4.1 load 写法支持指定多个来源，如cdn
5. 首次加载手续所需额外js文件全部打包成一个文件

## 网站多版本支持
1. 分离网站主体和网站功能
2. 网站功能分为文章、游戏、应用
3. 网站主体为多版本，可自由选择版本
4. 文章为单版本，游戏和应用为多版本
5. 目录分层，分为主体目录、功能目录
6. 功能目录下又分为文章目录、游戏目录、应用目录

## 网站扩展功能开发
1. 增加开发模式，支持第三方开发自己的应用
    1.1 支持自定义游戏和应用
    1.2 支持代码编辑，选择应用后自动打开vscode
2. 支持第三方部署，成为去中心化站点，部署后在主站增加一个站点
    1.1 有一个站点数组，资源可以从任意一个站点加载
    1.2 加载时会计算加载速度，下一次从最快的站点加载

## 站点与站点直接版本的同步
1. 主站如何同步其它站点的资源
2. 其它站点如何同步主站的资源
3. 关于这个问题，可以暂时通过github本身的版本管理实现通过。
4. 我希望应用和游戏有自己的独立的github仓库版本，这又需要怎么做呢？
5. 有独立ip的个人电脑可以作为下载站点。

## 游戏和应用始终放在主应用不行吗？
1. GitHub 对单个仓库的大小限制通常为100GB。
2. 磁盘空间限制：每个构建提供 23GB 的磁盘空间。如果项目包含大量的文件或依赖项，可能会耗尽磁盘空间
3. 根据1和2，我觉得游戏和应用完全可以放在主应用中，但是只适用于前期，到了后期就不行了。
4. 那用户需要怎么部署自己独立的应用呢？
5. 对第四点做的方案1：
    5.1 写一个后端，用户上传到自己的github仓库，然后在主站申请部署，并填写自己的github仓库地址
    5.2 这个后端会自动从第三方的仓库下载文件，然后合并到主站的github仓库
    5.3 每一次用户申请部署，都会生成一个新的版本号，旧的版本就放在旧的版本号目录中
6. 对第四点做的方案2：
    5.1 用户直接对主站的 github 仓库进行fork
    5.2 开发完成后，用户可以申请合并到主仓库
    5.3 主站作者审核通过后，会自动合并到主仓库，然后vercel.app就会自动部署了
7. 对第四点做的方案总结
    个人认为还是方案2比较好，但是github仓库不能无限扩展下去，越来越大可不好，如果一个应用10M，100个应用就1G了。

## 游戏和应用后期方案
1. 主站上会维护一个应用列表，列表中记载了每个应用的github仓库地址
2. 主站对应用进行打包，则需要一个专门的自动打包服务

## 关于旧版本的加载实现
1. 首先当前版本的文件一定是存在的，并且完成了压缩和打包，以多个打包好的文件的形式保存
2. 旧版本的文件以单个文件的形式保存
3. 其次最旧版本的文件一定是完整的，中间版本的文件则是不完整的，会引用旧版本的文件
4. 每次新增版本的文件，会有一个文件引用对象，如果新版本和旧版本一致，就会引用到旧版本的文件，如果不一致，就会引用到新版本的文件，这个是引用对象就已经完全确定的了


## 动态功能开发，不通过github实现版本管理，关于上方第四个问题做出的解决方案
1. 子站点发布应用后会发起一个申请，主站收到申请后会自动加载到主站
2. 当前应用自动识别为测试版本
3. 同时其它子站点也会从主站点加载应用
4. 是否能在 vercel.app 上部署？
    4.1 vercel.app 每次部署是否会删除掉上一个版本构建的产物？
5. 对 4.1 进行解答
    5.1 使用外部数据库服务
    5.2 在 Vercel 上存储文件数据，可以使用 Vercel Blob

## 主站查询服务器实现（集群实现）
1. 不是去中心化的站点，而是多中心化的站点
2. 主站是核心，主站挂了，其它站点就无法同步
3. 需要实现主从切换，主站关了，立刻切换其它站点为新的主站
4. 多个服务器维护一个主站查询功能

## 自动部署服务实现
1. 方案1：github 仓库版本合并，vercel.app 自动部署
2. 方案2：自动打包服务，单独实现一个应用进行部署

## 所需开发总结
1. 网站主体和功能分离
2. 网站多版本支持
3. 分布式部署实现
4. 主站查询服务器实现（集群实现）
5. 网站扩展功能开发
6. 自动打包服务实现（后期）

## 如何开始
基于 requireJs 还是 import ？
requireJs 性能应该要好很多吧。
从 lowcode-front-v2 中精简出来。
这样的话还需要一个项目，solo-coding-builder

## solo-coding-builder 用于构建 solo-coding
只要是引入资源就尽量用 cdn 资源